
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Open States project.">
      
      
        <meta name="author" content="James Turk">
      
      
        <link rel="canonical" href="https://docs.openstates.org/data/query-scraper-output-data/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-8.5.10">
    
    
      
        <title>How to query and examine data file output created by scrapers - Open States</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="red">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#how-to-query-and-examine-data-file-output-created-by-scrapers" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Open States" class="md-header__button md-logo" aria-label="Open States" data-md-component="logo">
      
  <img src="../../assets/openstates.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Open States
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              How to query and examine data file output created by scrapers
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="red"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="red"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/openstates/documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    openstates/documentation
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Open States" class="md-nav__button md-logo" aria-label="Open States" data-md-component="logo">
      
  <img src="../../assets/openstates.svg" alt="logo">

    </a>
    Open States
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/openstates/documentation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    openstates/documentation
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../code-of-conduct/" class="md-nav__link">
        Code of Conduct
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          API v3
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API v3" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          API v3
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v3/" class="md-nav__link">
        API v3 Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v3/changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          GraphQL API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="GraphQL API" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          GraphQL API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v2/" class="md-nav__link">
        DEPRECATED - GraphQL API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v2/root-nodes/" class="md-nav__link">
        Root Nodes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v2/types/" class="md-nav__link">
        Data Types
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v2/other/" class="md-nav__link">
        Other Notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v2/examples/" class="md-nav__link">
        Examples
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../api-v2/changelog/" class="md-nav__link">
        Changelog
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Contributing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contributing" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Contributing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        Getting Started
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/people/" class="md-nav__link">
        Contributing People Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/local-database/" class="md-nav__link">
        Running a Local Database
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/scrapers/" class="md-nav__link">
        Contributing to Scrapers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/writing-a-committee-scraper/" class="md-nav__link">
        Writing a Committee Scraper
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/openstates-org/" class="md-nav__link">
        History of open.pluralpolicy.com / openstates.org
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/testing-scrapers/" class="md-nav__link">
        Testing Scrapers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/state-specific/" class="md-nav__link">
        State-Specific Scraper Info
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Data" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Understanding the Data
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          How to query and examine data file output created by scrapers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        How to query and examine data file output created by scrapers
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simple-examination" class="md-nav__link">
    Simple examination
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#querying-a-full-set-of-scraper-output-files" class="md-nav__link">
    Querying a full set of scraper output files
  </a>
  
    <nav class="md-nav" aria-label="Querying a full set of scraper output files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-views-to-drill-into-the-data" class="md-nav__link">
    Use views to drill into the data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-queries" class="md-nav__link">
    Useful queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bills" class="md-nav__link">
    Bills
  </a>
  
    <nav class="md-nav" aria-label="Bills">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bills-that-are-missing-a-property-that-is-a-list-abstracts-actions-sponsorships-etc" class="md-nav__link">
    Bills that are missing a property that is a list (abstracts, actions, sponsorships, etc.)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distribution-of-bill-classifications" class="md-nav__link">
    Distribution of bill classifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distribution-of-bill-action-classifications" class="md-nav__link">
    Distribution of bill action classifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bill-actions-that-are-unclassified" class="md-nav__link">
    Bill actions that are unclassified
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bill-version-media-type-distribution" class="md-nav__link">
    Bill version media type distribution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vote-events" class="md-nav__link">
    Vote Events
  </a>
  
    <nav class="md-nav" aria-label="Vote Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vote-events-over-time-by-month" class="md-nav__link">
    Vote Events over time (by month)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vote-events-with-zero-or-unexpected-number-of-votes" class="md-nav__link">
    Vote events with zero or unexpected number of votes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vote-event-counts-check-distribution-for-anomalies" class="md-nav__link">
    Vote event counts check distribution for anomalies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
    <nav class="md-nav" aria-label="Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#date-sorted-lists-of-events-to-compare-to-source" class="md-nav__link">
    Date-sorted lists of events to compare to source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-distribution-of-related-entity-counts" class="md-nav__link">
    Check distribution of related entity counts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-agenda-related-entities" class="md-nav__link">
    Event Agenda Related Entities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../categorization/" class="md-nav__link">
        Categorization
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../session-naming/" class="md-nav__link">
        Session Naming
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Enhancement Proposals
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Enhancement Proposals" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Enhancement Proposals
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/001-purpose-and-process/" class="md-nav__link">
        OSEP #1: Purpose &amp; Process
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/002-legal-citations/" class="md-nav__link">
        OSEP #2: Legal Citations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/003-manual-people-data-tools/" class="md-nav__link">
        OSEP #3: Manual People Data Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/004-committee-data/" class="md-nav__link">
        OSEP #4: Committee Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/005-dedupe-key/" class="md-nav__link">
        OSEP #5: Replacing pupa_id with dedupe_key
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/006-new-people-offices/" class="md-nav__link">
        OSEP #6: New People Offices Schema
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/007-events/" class="md-nav__link">
        OSEP #7: Restoring Events Data
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../enhancement-proposals/008-active-sessions/" class="md-nav__link">
        OSEP #8: Active Sessions
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simple-examination" class="md-nav__link">
    Simple examination
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#querying-a-full-set-of-scraper-output-files" class="md-nav__link">
    Querying a full set of scraper output files
  </a>
  
    <nav class="md-nav" aria-label="Querying a full set of scraper output files">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-views-to-drill-into-the-data" class="md-nav__link">
    Use views to drill into the data
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#useful-queries" class="md-nav__link">
    Useful queries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bills" class="md-nav__link">
    Bills
  </a>
  
    <nav class="md-nav" aria-label="Bills">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#bills-that-are-missing-a-property-that-is-a-list-abstracts-actions-sponsorships-etc" class="md-nav__link">
    Bills that are missing a property that is a list (abstracts, actions, sponsorships, etc.)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distribution-of-bill-classifications" class="md-nav__link">
    Distribution of bill classifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#distribution-of-bill-action-classifications" class="md-nav__link">
    Distribution of bill action classifications
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bill-actions-that-are-unclassified" class="md-nav__link">
    Bill actions that are unclassified
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bill-version-media-type-distribution" class="md-nav__link">
    Bill version media type distribution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vote-events" class="md-nav__link">
    Vote Events
  </a>
  
    <nav class="md-nav" aria-label="Vote Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vote-events-over-time-by-month" class="md-nav__link">
    Vote Events over time (by month)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vote-events-with-zero-or-unexpected-number-of-votes" class="md-nav__link">
    Vote events with zero or unexpected number of votes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vote-event-counts-check-distribution-for-anomalies" class="md-nav__link">
    Vote event counts check distribution for anomalies
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#events" class="md-nav__link">
    Events
  </a>
  
    <nav class="md-nav" aria-label="Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#date-sorted-lists-of-events-to-compare-to-source" class="md-nav__link">
    Date-sorted lists of events to compare to source
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-distribution-of-related-entity-counts" class="md-nav__link">
    Check distribution of related entity counts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-agenda-related-entities" class="md-nav__link">
    Event Agenda Related Entities
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/openstates/documentation/edit/main/docs/data/query-scraper-output-data.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="how-to-query-and-examine-data-file-output-created-by-scrapers">How to query and examine data file output created by scrapers<a class="headerlink" href="#how-to-query-and-examine-data-file-output-created-by-scrapers" title="Permanent link">&para;</a></h1>
<p>This document is aimed to help with scraper development and data debugging.</p>
<p>Open States scrapers typically produce a set of output data files in the JSON format. Each file represents a primary
entity that the scraper has produced, such as a Bill, an Event or a Vote Event. When working on scraper code, it can
be really helpful to examine this output for data quality issues.</p>
<h2 id="simple-examination">Simple examination<a class="headerlink" href="#simple-examination" title="Permanent link">&para;</a></h2>
<p>The JSON format is relatively easy to view in any text editor or Integrated Development Environment (IDE). This makes
it easy to examine a specific output file.</p>
<p>And you can take it a step further by using a tool like <a href="https://jqlang.github.io/jq/">jq</a> to query the JSON document
so that you only see the attributes that are relevant to you. For example:</p>
<div class="highlight"><pre><span></span><code>cat<span class="w"> </span>vote_event_ff4ae3ef-656f-11ef-8b4c-732c295f582c.json<span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>.counts
</code></pre></div>
<h2 id="querying-a-full-set-of-scraper-output-files">Querying a full set of scraper output files<a class="headerlink" href="#querying-a-full-set-of-scraper-output-files" title="Permanent link">&para;</a></h2>
<p>But what if you want to check data quality issues that might be distributed across the output, which may consist of
thousands of data points? You can put together shell scripts/commands that iterate through and find certian files,
then parse them with <code>jq</code>. But this can be tricky, especially if you are not familiar with advanced shell scripting.</p>
<p>The good news is that, if you are familiar with SQL, there is a way to treat a set of scraper output files like a
database and use SQL to query that database. A tool called <a href="https://duckdb.org/">DuckDB</a> makes this possible.</p>
<p>Let's assume I've run one or more scrapers for Delaware. I open my terminal and look at the scraper output directory,
<code>_data/de</code>. There are over 3000 JSON files in that folder, so it would be painful to spot check lots of files:</p>
<div class="highlight"><pre><span></span><code>jesse@work:~/repo/openstates/openstates-scrapers/scrapers/_data/de$ ls -alh | grep &quot;.json&quot; | wc -l
3760
</code></pre></div>
<p>However, installing the DuckDB tool allows me to use it inside that folder to query the Bills data:</p>
<div class="highlight"><pre><span></span><code>jesse@work:~/repo/openstates/openstates-scrapers/scrapers/_data/de$ duckdb
v0.10.2 1601d94f94
Enter &quot;.help&quot; for usage hints.
Connected to a transient in-memory database.
Use &quot;.open FILENAME&quot; to reopen on a persistent database.
D SELECT * FROM read_json(&#39;bill_*.json&#39;);
</code></pre></div>
<p>Running <code>duckdb</code> in this way opens a "transient" database, meaning that anything you do will be gone once you close
the <code>duckdb</code> terminal (by using the <code>ctrl+d</code> keystroke). If you want to save anything you create in your session,
instead open it with a file that will save those Views/Tables: <code>duckdb scraper_output.db</code></p>
<p>You can see the data schema that DuckDB has identified from the JSON files by using <code>DESCRIBE</code>:</p>
<div class="highlight"><pre><span></span><code>D DESCRIBE SELECT * FROM read_json(&#39;bill_*.json&#39;);
┌─────────────────────┬──────────────────────────────────────────────────────────────────────────────────────────────┬─────────┬─────────┬─────────┬─────────┐
│     column_name     │                                         column_type                                          │  null   │   key   │ default │  extra  │
│       varchar       │                                           varchar                                            │ varchar │ varchar │ varchar │ varchar │
├─────────────────────┼──────────────────────────────────────────────────────────────────────────────────────────────┼─────────┼─────────┼─────────┼─────────┤
│ legislative_session │ VARCHAR                                                                                      │ YES     │         │         │         │
│ identifier          │ VARCHAR                                                                                      │ YES     │         │         │         │
│ title               │ VARCHAR                                                                                      │ YES     │         │         │         │
│ from_organization   │ VARCHAR                                                                                      │ YES     │         │         │         │
│ classification      │ VARCHAR[]                                                                                    │ YES     │         │         │         │
│ subject             │ JSON[]                                                                                       │ YES     │         │         │         │
│ abstracts           │ STRUCT(note VARCHAR, abstract VARCHAR)[]                                                     │ YES     │         │         │         │
│ other_titles        │ STRUCT(note VARCHAR, title VARCHAR)[]                                                        │ YES     │         │         │         │
│ other_identifiers   │ JSON[]                                                                                       │ YES     │         │         │         │
│ actions             │ STRUCT(description VARCHAR, date DATE, organization_id VARCHAR, classification VARCHAR[], …  │ YES     │         │         │         │
│ sponsorships        │ STRUCT(&quot;name&quot; VARCHAR, classification VARCHAR, entity_type VARCHAR, &quot;primary&quot; BOOLEAN, per…  │ YES     │         │         │         │
│ related_bills       │ JSON[]                                                                                       │ YES     │         │         │         │
│ versions            │ STRUCT(note VARCHAR, links STRUCT(url VARCHAR, media_type VARCHAR)[], date VARCHAR, classi…  │ YES     │         │         │         │
│ documents           │ STRUCT(note VARCHAR, links STRUCT(url VARCHAR, media_type VARCHAR)[], date VARCHAR, classi…  │ YES     │         │         │         │
│ citations           │ STRUCT(&quot;publication&quot; VARCHAR, citation VARCHAR, citation_type VARCHAR, effective JSON, exp…  │ YES     │         │         │         │
│ sources             │ STRUCT(url VARCHAR, note VARCHAR)[]                                                          │ YES     │         │         │         │
│ extras              │ JSON                                                                                         │ YES     │         │         │         │
│ _id                 │ UUID                                                                                         │ YES     │         │         │         │
├─────────────────────┴──────────────────────────────────────────────────────────────────────────────────────────────┴─────────┴─────────┴─────────┴─────────┤
│ 18 rows                                                                                                                                          6 columns │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
</code></pre></div>
<p>You'll notice that related entities like Bill Actions, Bill Sponsorships, etc... are embedded in the data as <code>STRUCT</code>
data: <code>actions</code>, <code>sponsorships</code>, etc.. This is typically structured as a list of <code>STRUCT</code> data, which is like a dict
or object (<code>STRUCT(property_a VARCHAR, property_b VARCHAR)[]</code>). We can drill down into those.</p>
<h3 id="use-views-to-drill-into-the-data">Use views to drill into the data<a class="headerlink" href="#use-views-to-drill-into-the-data" title="Permanent link">&para;</a></h3>
<p>To make this data structure simpler to reason about, we can use Views. Here's a set of recommended views you can try.
Please note that these views are used in many of the suggested queries below. In order to execute a query that uses
a view, you need to create the view first!</p>
<div class="highlight"><pre><span></span><code><span class="c1">-- Bills</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bills</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;bill_*.json&#39;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bill_actions</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">actions</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bill_action_classifications</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span><span class="w"> </span><span class="n">bill_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">bill_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">classification</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">classification</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bill_actions</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bill_sponsorships</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">sponsorships</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bill_versions</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="k">versions</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bill_version_links</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span><span class="w"> </span><span class="n">bill_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">bill_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">links</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bill_versions</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bill_subjects</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">subject</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">subject</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">bill_documents</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span><span class="w"> </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_identifier</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">bill_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span><span class="p">;</span>


<span class="c1">-- Vote Events</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">vote_events</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;vote_event_*.json&#39;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">vote_event_votes</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span>
<span class="w">       </span><span class="n">bill_identifier</span><span class="p">,</span>
<span class="w">       </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">vote_identifier</span><span class="p">,</span>
<span class="w">       </span><span class="n">_id</span><span class="w">        </span><span class="k">AS</span><span class="w"> </span><span class="n">vote_id</span><span class="p">,</span>
<span class="w">       </span><span class="k">unnest</span><span class="p">(</span><span class="n">votes</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vote_events</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">vote_event_counts</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span>
<span class="w">       </span><span class="n">bill_identifier</span><span class="p">,</span>
<span class="w">       </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">vote_identifier</span><span class="p">,</span>
<span class="w">       </span><span class="n">_id</span><span class="w">        </span><span class="k">AS</span><span class="w"> </span><span class="n">vote_id</span><span class="p">,</span>
<span class="w">       </span><span class="k">unnest</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vote_events</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">vote_sources</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">legislative_session</span><span class="p">,</span>
<span class="w">       </span><span class="n">bill_identifier</span><span class="p">,</span>
<span class="w">       </span><span class="n">identifier</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">vote_identifier</span><span class="p">,</span>
<span class="w">       </span><span class="n">_id</span><span class="w">        </span><span class="k">AS</span><span class="w"> </span><span class="n">vote_id</span><span class="p">,</span>
<span class="w">       </span><span class="k">unnest</span><span class="p">(</span><span class="n">sources</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vote_events</span><span class="p">;</span>

<span class="c1">-- Events</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="o">*</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;event*.json&#39;</span><span class="p">);</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">event_documents</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">documents</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">event_document_links</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="n">note</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">document_note</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">links</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">event_documents</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">event_media</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">media</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">event_participants</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">participants</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">event_agenda</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">agenda</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">event_agenda_related_entities</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">related_entities</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">event_agenda</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">VIEW</span><span class="w"> </span><span class="n">event_sources</span><span class="w"> </span><span class="k">AS</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">_id</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">event_id</span><span class="p">,</span><span class="w"> </span><span class="k">unnest</span><span class="p">(</span><span class="n">sources</span><span class="p">,</span><span class="w"> </span><span class="k">recursive</span><span class="w"> </span><span class="p">:</span><span class="o">=</span><span class="w"> </span><span class="k">true</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span><span class="p">;</span>
</code></pre></div>
<p>To view Views in your DuckDB database: <code>SHOW TABLES;</code></p>
<h3 id="useful-queries">Useful queries<a class="headerlink" href="#useful-queries" title="Permanent link">&para;</a></h3>
<p>These queries will assume you've created the Views listed above! Execute the Views queries above before trying these!</p>
<p>General utility: describe the shape of a given dataset:</p>
<div class="highlight"><pre><span></span><code><span class="k">DESCRIBE</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">bills</span><span class="p">;</span>
<span class="k">DESCRIBE</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">vote_events</span><span class="p">;</span>
</code></pre></div>
<h3 id="bills">Bills<a class="headerlink" href="#bills" title="Permanent link">&para;</a></h3>
<h4 id="bills-that-are-missing-a-property-that-is-a-list-abstracts-actions-sponsorships-etc">Bills that are missing a property that is a list (abstracts, actions, sponsorships, etc.)<a class="headerlink" href="#bills-that-are-missing-a-property-that-is-a-list-abstracts-actions-sponsorships-etc" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">abstracts</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">has_abstract</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">sponsorships</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">has_sponsorship</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="p">(</span><span class="n">len</span><span class="p">(</span><span class="n">related_bills</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">has_related_bills</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<h4 id="distribution-of-bill-classifications">Distribution of bill classifications<a class="headerlink" href="#distribution-of-bill-classifications" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">classification</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bills</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">classification</span><span class="p">;</span>
</code></pre></div>
<h4 id="distribution-of-bill-action-classifications">Distribution of bill action classifications<a class="headerlink" href="#distribution-of-bill-action-classifications" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">classification</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bill_action_classifications</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<h4 id="bill-actions-that-are-unclassified">Bill actions that are unclassified<a class="headerlink" href="#bill-actions-that-are-unclassified" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="p">(</span><span class="n">classification</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[])</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">action_is_unclassified</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bill_actions</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<h4 id="bill-version-media-type-distribution">Bill version media type distribution<a class="headerlink" href="#bill-version-media-type-distribution" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">media_type</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">bill_version_links</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<h3 id="vote-events">Vote Events<a class="headerlink" href="#vote-events" title="Permanent link">&para;</a></h3>
<h4 id="vote-events-over-time-by-month">Vote Events over time (by month)<a class="headerlink" href="#vote-events-over-time-by-month" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">date_trunc</span><span class="p">(</span><span class="s1">&#39;month&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">start_date</span><span class="p">::</span><span class="k">timestamp</span><span class="p">),</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vote_events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<h4 id="vote-events-with-zero-or-unexpected-number-of-votes">Vote events with zero or unexpected number of votes<a class="headerlink" href="#vote-events-with-zero-or-unexpected-number-of-votes" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">votes</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">num_votes</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="n">events_with_this_number</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vote_events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</code></pre></div>
<p>or check via count values for vote events where all counts are zero</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">vote_id</span><span class="p">,</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vote_event_counts</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">HAVING</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">value</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
</code></pre></div>
<h4 id="vote-event-counts-check-distribution-for-anomalies">Vote event counts check distribution for anomalies<a class="headerlink" href="#vote-event-counts-check-distribution-for-anomalies" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span>
<span class="k">option</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">vote_event_counts</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</code></pre></div>
<h3 id="events">Events<a class="headerlink" href="#events" title="Permanent link">&para;</a></h3>
<h4 id="date-sorted-lists-of-events-to-compare-to-source">Date-sorted lists of events to compare to source<a class="headerlink" href="#date-sorted-lists-of-events-to-compare-to-source" title="Permanent link">&para;</a></h4>
<p>Basic event info</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">start_date</span><span class="p">,</span><span class="w"> </span><span class="n">all_day</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="k">location</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">classification</span><span class="p">,</span><span class="w"> </span><span class="n">description</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">start_date</span><span class="p">;</span>
</code></pre></div>
<p>Event info with source URL</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">start_date</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">all_day</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="k">location</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">classification</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">url</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="n">e</span>
<span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">event_sources</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">s</span><span class="p">.</span><span class="n">event_id</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">start_date</span><span class="p">;</span>
</code></pre></div>
<h4 id="check-distribution-of-related-entity-counts">Check distribution of related entity counts<a class="headerlink" href="#check-distribution-of-related-entity-counts" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">media</span><span class="p">),</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">documents</span><span class="p">),</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">links</span><span class="p">),</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">participants</span><span class="p">),</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">agenda</span><span class="p">),</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
<span class="k">SELECT</span><span class="w"> </span><span class="n">len</span><span class="p">(</span><span class="n">sources</span><span class="p">),</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">events</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
</code></pre></div>
<h4 id="event-agenda-related-entities">Event Agenda Related Entities<a class="headerlink" href="#event-agenda-related-entities" title="Permanent link">&para;</a></h4>
<p>Distribution of entity types</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">entity_type</span><span class="p">,</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">event_agenda_related_entities</span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<p>List of events with related entities, sorted by event date</p>
<div class="highlight"><pre><span></span><code><span class="k">SELECT</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">start_date</span><span class="p">,</span><span class="w"> </span><span class="n">re</span><span class="p">.</span><span class="n">event_name</span><span class="p">,</span><span class="w"> </span><span class="n">re</span><span class="p">.</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">entity_type</span>
<span class="k">FROM</span><span class="w"> </span><span class="n">event_agenda_related_entities</span><span class="w"> </span><span class="n">re</span>
<span class="w">         </span><span class="k">INNER</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">re</span><span class="p">.</span><span class="n">event_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">_id</span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">start_date</span><span class="p">;</span>
</code></pre></div>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../" class="md-footer__link md-footer__link--prev" aria-label="Previous: Understanding the Data" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Understanding the Data
            </div>
          </div>
        </a>
      
      
        
        <a href="../categorization/" class="md-footer__link md-footer__link--next" aria-label="Next: Categorization" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Categorization
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2021 Open States
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://twitter.com/openstates" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
      
      
    
    <a href="https://github.com/openstates" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.top", "navigation.sections", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
    
    
  </body>
</html>